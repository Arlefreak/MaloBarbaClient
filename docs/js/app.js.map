{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/app.js","src/js/collections/Products.js","src/js/common.js","src/js/models/Product.js","src/js/views/List.js","src/js/views/Product.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\nvar $         = window.$;\nvar ListView  = require('./views/List');\n\n$(function() {\n    new ListView();\n});\n","\"use strict\";\n\nvar $        = window.$;\nvar Backbone = window.Backbone;\nBackbone.$   = $;\nvar Common   = require('../common');\nvar Product  = require('../models/Product');\n\nvar Products = Backbone.Collection.extend({\n    model: Product,\n    url: Common.URL + 'product?status=IN',\n\n    // inStock: function(){\n    //     return this.filter(function(product) {\n    //         return product.get('inventory');\n    //     });\n    // },\n\n    comparator: function(product) {\n        return product.get('order');\n    }\n});\n\nmodule.exports = new Products();\n","\"use strict\";\n\nvar Common = {\n    ENTER_KEY: 13,\n    FILTER: \"\",\n    URL: 'http://api.malobarba.com/api/'\n};\n\nmodule.exports = Common;\n","\"use strict\";\n\nvar $ = window.$;\nvar Backbone = window.Backbone;\nvar Common = require('../common.js');\nBackbone.$ = $;\n\nmodule.exports = Backbone.Model.extend({\n    urlRoot: Common.URL + 'product',\n    defaults: {\n        pk: -1,\n        sku: '',\n        name: '',\n        image: '',\n        description: '',\n        price: 0,\n        discount: 0,\n        inventory: 0,\n        status: '',\n        tags: [],\n        category: '',\n        date: '',\n        updated: '',\n        order: 0,\n        url: ''\n    },\n\n    url: function() {\n        return this.urlRoot + '/' + this.pk;\n    },\n});\n","\"use strict\";\n\nvar $ = window.$;\nvar Backbone = window.Backbone;\nBackbone.$ = $;\n\nvar Common = require('../common');\nvar Products = require('../collections/Products');\nvar ProductView = require('./Product.js');\n\nmodule.exports = Backbone.View.extend({\n\n    // Instead of generating a new element, bind to the existing skeleton of\n    // the App already present in the HTML.\n    el: '#storeApp',\n\n    // New\n    // Delegated events for creating new items, and clearing completed ones.\n    events: {\n        // 'keypress #new-todo': 'createOnEnter',\n        // 'click #clear-completed': 'clearCompleted',\n        // 'click #toggle-all': 'toggleAllComplete'\n    },\n\n    // At initialization we bind to the relevant events on the `Todos`\n    // collection, when items are added or changed. Kick things off by\n    // loading any preexisting todos that might be saved in *localStorage*.\n    initialize: function() {\n        // this.allCheckbox = this.$('#toggle-all')[0];\n        // this.$input = this.$('#new-todo');\n        this.$footer = this.$('#footer');\n        this.$main = this.$('#storeApp');\n\n        this.listenTo(Products, 'add', this.addOne);\n        this.listenTo(Products, 'reset', this.addAll);\n\n        // New\n        this.listenTo(Products, 'filter', this.filterAll);\n        this.listenTo(Products, 'all', this.render);\n        Products.fetch({reset:true});\n    },\n\n    // New\n    // Re-rendering the App just means refreshing the statistics -- the rest\n    // of the app doesn't change.\n        render: function() {\n\n        if (Products.length) {\n            this.$main.show();\n            this.$footer.show();\n        } else {\n            this.$main.hide();\n            this.$footer.hide();\n        }\n    },\n\n    // Add a single todo item to the list by creating a view for it, and\n    // appending its element to the `<ul>`.\n    addOne: function(product) {\n        var view = new ProductView({\n            model: product\n        });\n        $('#productList').append(view.render().el);\n    },\n\n    // Add all items in the **Todos** collection at once.\n    addAll: function() {\n        this.$('#productList').html('');\n        Products.each(this.addOne, this);\n    },\n\n    // New\n    filterOne: function(product) {\n        // product.trigger('visible');\n    },\n\n    // New\n    filterAll: function() {\n        Products.each(this.filterOne, this);\n    },\n\n\n    // New\n    // Generate the attributes for a new Todo item.\n    newAttributes: function() {\n        return {\n            name: this.$input.val().trim(),\n        };\n    },\n\n    // New\n    // If you hit return in the main input field, create new Todo model,\n    // persisting it to localStorage.\n    createOnEnter: function(event) {\n        if (event.which !== Common.ENTER_KEY || !this.$input.val().trim()) {\n            return;\n        }\n        Products.create(this.newAttributes());\n        this.$input.val('');\n    }\n});\n","\"use strict\";\n\nvar $        = window.$;\nvar Backbone = window.Backbone;\nvar _        = window._;\nBackbone.$   = $;\n\nvar Common   = require('../common.js');\n\nmodule.exports = Backbone.View.extend({\n\n    //... is a list tag.\n    tagName: 'li',\n\n    // Cache the template function for a single item.\n    template: _.template($('#product-template').html()),\n\n    // The DOM events specific to an item.\n    events: {\n        // 'click .toggle': 'togglecompleted', // NEW\n        // 'dblclick label': 'edit',\n        // 'click .destroy': 'clear', // NEW\n        // 'keypress .edit': 'updateOnEnter',\n        // 'blur .edit': 'close'\n    },\n\n    // The TodoView listens for changes to its model, re-rendering. Since there's\n    // a one-to-one correspondence between a **Todo** and a **TodoView** in this\n    // app, we set a direct reference on the model for convenience.\n    initialize: function() {\n        this.listenTo(this.model, 'change', this.render);\n        this.listenTo(this.model, 'destroy', this.remove); // NEW\n        // this.listenTo(this.model, 'visible', this.toggleVisible); // NEW\n    },\n\n    // Re-render the titles of the todo item.\n    render: function() {\n        this.$el.html(this.template(this.model.attributes));\n        this.$input = this.$('.edit');\n        return this;\n    },\n\n    // NEW - Toggles visibility of item\n    toggleVisible: function() {\n        this.$el.toggleClass('hidden', this.isHidden());\n    },\n\n    // NEW - Determines if item should be hidden\n    isHidden: function() {\n        var stock = this.model.get('stock');\n        return ( // hidden cases only\n            (!stock && Common.FILTER === 'stock') || (stock && Common.FILTER === 'stock')\n        );\n    },\n\n    // NEW - Remove the item, destroy the model from *localStorage* and delete its view.\n    clear: function() {\n        this.model.destroy();\n    }\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL2NvbGxlY3Rpb25zL1Byb2R1Y3RzLmpzIiwic3JjL2pzL2NvbW1vbi5qcyIsInNyYy9qcy9tb2RlbHMvUHJvZHVjdC5qcyIsInNyYy9qcy92aWV3cy9MaXN0LmpzIiwic3JjL2pzL3ZpZXdzL1Byb2R1Y3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0JztcbnZhciAkICAgICAgICAgPSB3aW5kb3cuJDtcbnZhciBMaXN0VmlldyAgPSByZXF1aXJlKCcuL3ZpZXdzL0xpc3QnKTtcblxuJChmdW5jdGlvbigpIHtcbiAgICBuZXcgTGlzdFZpZXcoKTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciAkICAgICAgICA9IHdpbmRvdy4kO1xudmFyIEJhY2tib25lID0gd2luZG93LkJhY2tib25lO1xuQmFja2JvbmUuJCAgID0gJDtcbnZhciBDb21tb24gICA9IHJlcXVpcmUoJy4uL2NvbW1vbicpO1xudmFyIFByb2R1Y3QgID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Byb2R1Y3QnKTtcblxudmFyIFByb2R1Y3RzID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuICAgIG1vZGVsOiBQcm9kdWN0LFxuICAgIHVybDogQ29tbW9uLlVSTCArICdwcm9kdWN0P3N0YXR1cz1JTicsXG5cbiAgICAvLyBpblN0b2NrOiBmdW5jdGlvbigpe1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24ocHJvZHVjdCkge1xuICAgIC8vICAgICAgICAgcmV0dXJuIHByb2R1Y3QuZ2V0KCdpbnZlbnRvcnknKTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfSxcblxuICAgIGNvbXBhcmF0b3I6IGZ1bmN0aW9uKHByb2R1Y3QpIHtcbiAgICAgICAgcmV0dXJuIHByb2R1Y3QuZ2V0KCdvcmRlcicpO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBQcm9kdWN0cygpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBDb21tb24gPSB7XG4gICAgRU5URVJfS0VZOiAxMyxcbiAgICBGSUxURVI6IFwiXCIsXG4gICAgVVJMOiAnaHR0cDovL2FwaS5tYWxvYmFyYmEuY29tL2FwaS8nXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbW1vbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgJCA9IHdpbmRvdy4kO1xudmFyIEJhY2tib25lID0gd2luZG93LkJhY2tib25lO1xudmFyIENvbW1vbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi5qcycpO1xuQmFja2JvbmUuJCA9ICQ7XG5cbm1vZHVsZS5leHBvcnRzID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICB1cmxSb290OiBDb21tb24uVVJMICsgJ3Byb2R1Y3QnLFxuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIHBrOiAtMSxcbiAgICAgICAgc2t1OiAnJyxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGltYWdlOiAnJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICBwcmljZTogMCxcbiAgICAgICAgZGlzY291bnQ6IDAsXG4gICAgICAgIGludmVudG9yeTogMCxcbiAgICAgICAgc3RhdHVzOiAnJyxcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIGNhdGVnb3J5OiAnJyxcbiAgICAgICAgZGF0ZTogJycsXG4gICAgICAgIHVwZGF0ZWQ6ICcnLFxuICAgICAgICBvcmRlcjogMCxcbiAgICAgICAgdXJsOiAnJ1xuICAgIH0sXG5cbiAgICB1cmw6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmxSb290ICsgJy8nICsgdGhpcy5waztcbiAgICB9LFxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyICQgPSB3aW5kb3cuJDtcbnZhciBCYWNrYm9uZSA9IHdpbmRvdy5CYWNrYm9uZTtcbkJhY2tib25lLiQgPSAkO1xuXG52YXIgQ29tbW9uID0gcmVxdWlyZSgnLi4vY29tbW9uJyk7XG52YXIgUHJvZHVjdHMgPSByZXF1aXJlKCcuLi9jb2xsZWN0aW9ucy9Qcm9kdWN0cycpO1xudmFyIFByb2R1Y3RWaWV3ID0gcmVxdWlyZSgnLi9Qcm9kdWN0LmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuXG4gICAgLy8gSW5zdGVhZCBvZiBnZW5lcmF0aW5nIGEgbmV3IGVsZW1lbnQsIGJpbmQgdG8gdGhlIGV4aXN0aW5nIHNrZWxldG9uIG9mXG4gICAgLy8gdGhlIEFwcCBhbHJlYWR5IHByZXNlbnQgaW4gdGhlIEhUTUwuXG4gICAgZWw6ICcjc3RvcmVBcHAnLFxuXG4gICAgLy8gTmV3XG4gICAgLy8gRGVsZWdhdGVkIGV2ZW50cyBmb3IgY3JlYXRpbmcgbmV3IGl0ZW1zLCBhbmQgY2xlYXJpbmcgY29tcGxldGVkIG9uZXMuXG4gICAgZXZlbnRzOiB7XG4gICAgICAgIC8vICdrZXlwcmVzcyAjbmV3LXRvZG8nOiAnY3JlYXRlT25FbnRlcicsXG4gICAgICAgIC8vICdjbGljayAjY2xlYXItY29tcGxldGVkJzogJ2NsZWFyQ29tcGxldGVkJyxcbiAgICAgICAgLy8gJ2NsaWNrICN0b2dnbGUtYWxsJzogJ3RvZ2dsZUFsbENvbXBsZXRlJ1xuICAgIH0sXG5cbiAgICAvLyBBdCBpbml0aWFsaXphdGlvbiB3ZSBiaW5kIHRvIHRoZSByZWxldmFudCBldmVudHMgb24gdGhlIGBUb2Rvc2BcbiAgICAvLyBjb2xsZWN0aW9uLCB3aGVuIGl0ZW1zIGFyZSBhZGRlZCBvciBjaGFuZ2VkLiBLaWNrIHRoaW5ncyBvZmYgYnlcbiAgICAvLyBsb2FkaW5nIGFueSBwcmVleGlzdGluZyB0b2RvcyB0aGF0IG1pZ2h0IGJlIHNhdmVkIGluICpsb2NhbFN0b3JhZ2UqLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyB0aGlzLmFsbENoZWNrYm94ID0gdGhpcy4kKCcjdG9nZ2xlLWFsbCcpWzBdO1xuICAgICAgICAvLyB0aGlzLiRpbnB1dCA9IHRoaXMuJCgnI25ldy10b2RvJyk7XG4gICAgICAgIHRoaXMuJGZvb3RlciA9IHRoaXMuJCgnI2Zvb3RlcicpO1xuICAgICAgICB0aGlzLiRtYWluID0gdGhpcy4kKCcjc3RvcmVBcHAnKTtcblxuICAgICAgICB0aGlzLmxpc3RlblRvKFByb2R1Y3RzLCAnYWRkJywgdGhpcy5hZGRPbmUpO1xuICAgICAgICB0aGlzLmxpc3RlblRvKFByb2R1Y3RzLCAncmVzZXQnLCB0aGlzLmFkZEFsbCk7XG5cbiAgICAgICAgLy8gTmV3XG4gICAgICAgIHRoaXMubGlzdGVuVG8oUHJvZHVjdHMsICdmaWx0ZXInLCB0aGlzLmZpbHRlckFsbCk7XG4gICAgICAgIHRoaXMubGlzdGVuVG8oUHJvZHVjdHMsICdhbGwnLCB0aGlzLnJlbmRlcik7XG4gICAgICAgIFByb2R1Y3RzLmZldGNoKHtyZXNldDp0cnVlfSk7XG4gICAgfSxcblxuICAgIC8vIE5ld1xuICAgIC8vIFJlLXJlbmRlcmluZyB0aGUgQXBwIGp1c3QgbWVhbnMgcmVmcmVzaGluZyB0aGUgc3RhdGlzdGljcyAtLSB0aGUgcmVzdFxuICAgIC8vIG9mIHRoZSBhcHAgZG9lc24ndCBjaGFuZ2UuXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgaWYgKFByb2R1Y3RzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy4kbWFpbi5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLiRmb290ZXIuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kbWFpbi5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLiRmb290ZXIuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIHNpbmdsZSB0b2RvIGl0ZW0gdG8gdGhlIGxpc3QgYnkgY3JlYXRpbmcgYSB2aWV3IGZvciBpdCwgYW5kXG4gICAgLy8gYXBwZW5kaW5nIGl0cyBlbGVtZW50IHRvIHRoZSBgPHVsPmAuXG4gICAgYWRkT25lOiBmdW5jdGlvbihwcm9kdWN0KSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IFByb2R1Y3RWaWV3KHtcbiAgICAgICAgICAgIG1vZGVsOiBwcm9kdWN0XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcjcHJvZHVjdExpc3QnKS5hcHBlbmQodmlldy5yZW5kZXIoKS5lbCk7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhbGwgaXRlbXMgaW4gdGhlICoqVG9kb3MqKiBjb2xsZWN0aW9uIGF0IG9uY2UuXG4gICAgYWRkQWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy4kKCcjcHJvZHVjdExpc3QnKS5odG1sKCcnKTtcbiAgICAgICAgUHJvZHVjdHMuZWFjaCh0aGlzLmFkZE9uZSwgdGhpcyk7XG4gICAgfSxcblxuICAgIC8vIE5ld1xuICAgIGZpbHRlck9uZTogZnVuY3Rpb24ocHJvZHVjdCkge1xuICAgICAgICAvLyBwcm9kdWN0LnRyaWdnZXIoJ3Zpc2libGUnKTtcbiAgICB9LFxuXG4gICAgLy8gTmV3XG4gICAgZmlsdGVyQWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgUHJvZHVjdHMuZWFjaCh0aGlzLmZpbHRlck9uZSwgdGhpcyk7XG4gICAgfSxcblxuXG4gICAgLy8gTmV3XG4gICAgLy8gR2VuZXJhdGUgdGhlIGF0dHJpYnV0ZXMgZm9yIGEgbmV3IFRvZG8gaXRlbS5cbiAgICBuZXdBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuJGlucHV0LnZhbCgpLnRyaW0oKSxcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgLy8gTmV3XG4gICAgLy8gSWYgeW91IGhpdCByZXR1cm4gaW4gdGhlIG1haW4gaW5wdXQgZmllbGQsIGNyZWF0ZSBuZXcgVG9kbyBtb2RlbCxcbiAgICAvLyBwZXJzaXN0aW5nIGl0IHRvIGxvY2FsU3RvcmFnZS5cbiAgICBjcmVhdGVPbkVudGVyOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IENvbW1vbi5FTlRFUl9LRVkgfHwgIXRoaXMuJGlucHV0LnZhbCgpLnRyaW0oKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFByb2R1Y3RzLmNyZWF0ZSh0aGlzLm5ld0F0dHJpYnV0ZXMoKSk7XG4gICAgICAgIHRoaXMuJGlucHV0LnZhbCgnJyk7XG4gICAgfVxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyICQgICAgICAgID0gd2luZG93LiQ7XG52YXIgQmFja2JvbmUgPSB3aW5kb3cuQmFja2JvbmU7XG52YXIgXyAgICAgICAgPSB3aW5kb3cuXztcbkJhY2tib25lLiQgICA9ICQ7XG5cbnZhciBDb21tb24gICA9IHJlcXVpcmUoJy4uL2NvbW1vbi5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcblxuICAgIC8vLi4uIGlzIGEgbGlzdCB0YWcuXG4gICAgdGFnTmFtZTogJ2xpJyxcblxuICAgIC8vIENhY2hlIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgYSBzaW5nbGUgaXRlbS5cbiAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSgkKCcjcHJvZHVjdC10ZW1wbGF0ZScpLmh0bWwoKSksXG5cbiAgICAvLyBUaGUgRE9NIGV2ZW50cyBzcGVjaWZpYyB0byBhbiBpdGVtLlxuICAgIGV2ZW50czoge1xuICAgICAgICAvLyAnY2xpY2sgLnRvZ2dsZSc6ICd0b2dnbGVjb21wbGV0ZWQnLCAvLyBORVdcbiAgICAgICAgLy8gJ2RibGNsaWNrIGxhYmVsJzogJ2VkaXQnLFxuICAgICAgICAvLyAnY2xpY2sgLmRlc3Ryb3knOiAnY2xlYXInLCAvLyBORVdcbiAgICAgICAgLy8gJ2tleXByZXNzIC5lZGl0JzogJ3VwZGF0ZU9uRW50ZXInLFxuICAgICAgICAvLyAnYmx1ciAuZWRpdCc6ICdjbG9zZSdcbiAgICB9LFxuXG4gICAgLy8gVGhlIFRvZG9WaWV3IGxpc3RlbnMgZm9yIGNoYW5nZXMgdG8gaXRzIG1vZGVsLCByZS1yZW5kZXJpbmcuIFNpbmNlIHRoZXJlJ3NcbiAgICAvLyBhIG9uZS10by1vbmUgY29ycmVzcG9uZGVuY2UgYmV0d2VlbiBhICoqVG9kbyoqIGFuZCBhICoqVG9kb1ZpZXcqKiBpbiB0aGlzXG4gICAgLy8gYXBwLCB3ZSBzZXQgYSBkaXJlY3QgcmVmZXJlbmNlIG9uIHRoZSBtb2RlbCBmb3IgY29udmVuaWVuY2UuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgJ2NoYW5nZScsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCAnZGVzdHJveScsIHRoaXMucmVtb3ZlKTsgLy8gTkVXXG4gICAgICAgIC8vIHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgJ3Zpc2libGUnLCB0aGlzLnRvZ2dsZVZpc2libGUpOyAvLyBORVdcbiAgICB9LFxuXG4gICAgLy8gUmUtcmVuZGVyIHRoZSB0aXRsZXMgb2YgdGhlIHRvZG8gaXRlbS5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC5hdHRyaWJ1dGVzKSk7XG4gICAgICAgIHRoaXMuJGlucHV0ID0gdGhpcy4kKCcuZWRpdCcpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gTkVXIC0gVG9nZ2xlcyB2aXNpYmlsaXR5IG9mIGl0ZW1cbiAgICB0b2dnbGVWaXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy4kZWwudG9nZ2xlQ2xhc3MoJ2hpZGRlbicsIHRoaXMuaXNIaWRkZW4oKSk7XG4gICAgfSxcblxuICAgIC8vIE5FVyAtIERldGVybWluZXMgaWYgaXRlbSBzaG91bGQgYmUgaGlkZGVuXG4gICAgaXNIaWRkZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RvY2sgPSB0aGlzLm1vZGVsLmdldCgnc3RvY2snKTtcbiAgICAgICAgcmV0dXJuICggLy8gaGlkZGVuIGNhc2VzIG9ubHlcbiAgICAgICAgICAgICghc3RvY2sgJiYgQ29tbW9uLkZJTFRFUiA9PT0gJ3N0b2NrJykgfHwgKHN0b2NrICYmIENvbW1vbi5GSUxURVIgPT09ICdzdG9jaycpXG4gICAgICAgICk7XG4gICAgfSxcblxuICAgIC8vIE5FVyAtIFJlbW92ZSB0aGUgaXRlbSwgZGVzdHJveSB0aGUgbW9kZWwgZnJvbSAqbG9jYWxTdG9yYWdlKiBhbmQgZGVsZXRlIGl0cyB2aWV3LlxuICAgIGNsZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5kZXN0cm95KCk7XG4gICAgfVxufSk7XG4iXX0="}